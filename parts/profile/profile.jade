template(name='profile')
    with user
        .ui.stackable.padded.grid
            .sixteen.wide.center.aligned.column
                span.mobile.only
                    a(href="/user/#{username}/")
                a.ui.header.refresh_user_stats(href="/user/#{username}") 
                    |#{name}
                a(href="/user/#{username}/")
                    img.ui.centered.tiny.inline.spaced.rounded.image.zoomer(src="{{c.url profile_image_id height=500 width=500 gravity='face' crop='fill'}}")

                a.ui.small.header.refresh_user_stats(href="/user/#{username}") 
                    |@#{username}
                .ui.label #{profile_views} views
                +user_follow_button

                .ui.big.button.checkin
                    |checkin
                if is_admin
                    a.ui.icon.button(href="/user/#{username}/edit" title='admin edit account')
                        i.shield.large.icon
                        // |account
                if is_current_user
                    a.ui.icon.button(href="/user/#{username}/edit" title='edit your account')
                        i.cog.icon
                        // |account
                    a.ui.icon.button.logout(href="#" title='log out')
                        i.sign.out.icon
                        // |log out
                // if in_dev
                //     +print_this
                .ui.stackable.grid
                    .eight.wide.column
                        +text_edit key='name' label='name' direct=true
                    .eight.wide.column
                        +number_edit key='age' label='age' direct=true
                    .sixteen.wide.column
                        +textarea_edit key='about' label='about' direct=true
                .ui.header latest checkins
                each user_checkins
                    .ui.header #{location_ob}
                    |#{when}


template(name='user_follow_button')
    unless is_current_user
        if is_following
            .ui.black.animated.fade.button.unfollow(title='unfollow')
                .hidden.content
                    i.minus.large.icon
                    |unfollow
                .visible.content
                    i.checkmark.large.icon
                    |follow
        else
            .ui.animated.fade.button.follow(title='follow')
                .hidden.content
                    i.plus.large.icon
                    |follow
                .visible.content
                    i.user.plus.large.icon
                    |follow



