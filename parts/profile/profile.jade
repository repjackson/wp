template(name='profile')
    with user
        .ui.stackable.padded.grid
            if is_current_user
                .centered.row
                    .eight.wide.column
                        if currentUser.light_mode
                            a.ui.header.visible Visible Profile
                        else
                            a.ui.header.anonymous Invisible Profile
                        
                    .four.wide.center.aligned.column
                        if currentUser.light_mode
                            i.big.eye.link.icon.visible
                        else
                            i.big.eye.slash.link.icon.anonymous
            .row
                .sixteen.wide.center.aligned.column
                    img.ui.centered.medium.circular.spaced.image.zoomer(src="{{c.url profile_image_id height=500 width=500 gravity='face' crop='fill'}}" class=light_mode_class)
                    div
                    span.mobile.only
                        a(href="/user/#{username}/")
                    a.ui.header.refresh_user_stats(href="/user/#{username}") 
                        |#{name}
    
                    a.ui.small.header.refresh_user_stats(href="/user/#{username}") 
                        |@#{username}
                    .ui.label #{profile_views} views
                    unless is_current_user
                        +user_follow_button
    
                    // .ui.big.button.checkin
                    //     |checkin
                    if is_admin
                        a.ui.icon.button(href="/user/#{username}/edit" title='admin edit account')
                            i.shield.large.icon
                            // |account
                    if is_current_user
                        a.ui.icon.basic.button(href="/user/#{username}/edit" title='edit your account')
                            i.cog.large.icon
                            // |account
                        a.ui.icon.basic.button.logout(href="#" title='log out')
                            i.sign.out.large.icon
                            // |log out
                    // if in_dev
                    //     +print_this
                    if is_current_user
                        .ui.stackable.padded.grid
                            .eight.wide.column
                                +text_edit key='name' label='name' direct=true
                            .eight.wide.column
                                +number_edit key='age' label='age' direct=true
                            .eight.wide.column
                                +textarea_edit key='about' label='about' direct=true
                            .eight.wide.column
                                +array_edit key='tags' label='tags' direct=true
                            .ui.basic.circular.button.refresh_position
                                |refresh position
                    else 
                        .ui.stackable.padded.grid
                            .eight.wide.column
                                .ui.header #{name}
                            .eight.wide.column
                                .ui.header #{age}
                            .eight.wide.column
                                .ui.small.header #{about}
                            .eight.wide.column
                                each tags
                                    .ui.basic.label #{this}
                    .ui.header geocoded #{geocoded}     
                    .ui.big.list
                        .item category: #{category}
                        .item #{long_form}
                    .ui.inline.small.grey.header(title='lat, long') #{current_lat}, #{current_long}                     
                    if current_position
                        .ui.list
                            with current_position.coords
                                .item accuracy #{accuracy}
                                .item altitude #{altitude}
                                .item altitudeAccuracy #{altitudeAccuracy}
                                .item heading #{heading}
                                .item latitude #{latitude}
                                .item longitude #{longitude}
                                .item speed #{speed}
                                .item timestamp #{timestamp}
                        
                    // .ui.header latest checkins
                    // .ui.selection.list
                    //     each user_checkins
                    //         .item #{location_ob}
                    //         |#{when}
                    // .ui.header socials
                    .ui.five.column.grid
                        .column
                            i.big.youtube.red.icon
                        .column
                        .column
                        .column
                        .column
                            
                        .column
                            i.big.instagram.red.icon
                        .column
                        .column
                        .column
                        .column
                        .column
                            i.big.facebook.blue.icon
                        .column
                        .column
                        .column
                        .column
                        .column

template(name='user_follow_button')
    unless is_current_user
        if is_following
            .ui.black.animated.fade.big.circular.teal.button.unfollow(title='unfollow')
                .hidden.content
                    i.minus.large.icon
                    |unfollow
                .visible.content
                    i.checkmark.large.icon
                    |following
        else
            .ui.big.circular.teal.button.follow(title='follow')
                i.plus.large.icon
                |follow



